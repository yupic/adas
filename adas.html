<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест AdAS Spectrum</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #4a90e2, #7b68ee);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            border-left: 5px solid #4a90e2;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #4a90e2;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question {
            margin-bottom: 25px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }

        .question:hover {
            transform: translateY(-2px);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 15px;
            line-height: 1.6;
            color: #2c3e50;
        }

        .question-number {
            color: #4a90e2;
            font-weight: bold;
            margin-right: 10px;
        }

        .options {
            display: flex;
            gap: 20px;
        }

        .option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #e3f2fd;
        }

        .option input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }

        .option.yes {
            color: #4caf50;
        }

        .option.no {
            color: #f44336;
        }

        .option input[type="radio"]:checked + .option-label {
            font-weight: bold;
        }

        .results {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            display: none;
        }

        .results h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .section-result {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .total-result {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            text-align: center;
        }

        .total-score {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .interpretation {
            font-size: 1.2em;
            font-weight: 600;
        }

        .calculate-btn {
            background: linear-gradient(45deg, #4caf50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            background: #4caf50;
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        /* Стили для отладочной панели */
        .debug-panel {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 3px solid #ff4444;
            box-shadow: 0 4px 20px rgba(255, 68, 68, 0.3);
        }

        .debug-panel button {
            transition: all 0.3s ease;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .debug-panel button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Мобильные стили */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 2em;
            }

            .header p {
                font-size: 1em;
            }

            .content {
                padding: 20px;
            }

            .section {
                padding: 15px;
                margin-bottom: 30px;
            }

            .section-title {
                font-size: 1.2em;
                margin-bottom: 20px;
            }

            .question {
                padding: 15px;
                margin-bottom: 20px;
            }

            .question-text {
                font-size: 0.95em;
                margin-bottom: 12px;
            }

            .options {
                gap: 15px;
            }

            .option {
                padding: 12px 15px;
                justify-content: center;
            }

            .calculate-btn {
                padding: 12px 30px;
                font-size: 1.1em;
                margin: 20px auto;
            }

            .results {
                padding: 20px;
                margin-top: 30px;
            }

            .results h2 {
                font-size: 1.6em;
                margin-bottom: 20px;
            }

            .section-result {
                padding: 12px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .total-result {
                padding: 20px;
            }

            .total-score {
                font-size: 2.5em;
            }

            .interpretation {
                font-size: 1.1em;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .header {
                padding: 15px 10px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 15px;
            }

            .section {
                padding: 12px;
                margin-bottom: 25px;
            }

            .section-title {
                font-size: 1.1em;
                margin-bottom: 15px;
            }

            .question {
                padding: 12px;
                margin-bottom: 15px;
            }

            .question-text {
                font-size: 0.9em;
                line-height: 1.5;
            }

            .question-number {
                display: block;
                margin-bottom: 5px;
            }

            .option {
                padding: 10px 12px;
                font-size: 0.95em;
            }

            .calculate-btn {
                padding: 10px 25px;
                font-size: 1em;
                width: 100%;
                max-width: 300px;
            }

            .results {
                padding: 15px;
            }

            .results h2 {
                font-size: 1.4em;
            }

            .section-result {
                padding: 10px;
            }

            .total-result {
                padding: 15px;
            }

            .total-score {
                font-size: 2.2em;
            }

            .interpretation {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Тест AdAS Spectrum</h1>
            <p>Диагностический тест на выявление аутичных черт</p>
            <p style="font-size: 0.9em; opacity: 0.8; margin-top: 10px;">
                Перевод <a href="https://t.me/na_spektre/196" target="_blank" style="color: #ffffff; text-decoration: underline;">Джумка</a>
                <br/>
                Реализация <a href="https://github.com/yupic/adas" target="_blank" style="color: #ffffff; text-decoration: underline;">yupic</a>
            </p>
        </div>

        <div class="content">
            <div class="loading" id="loading">Загрузка вопросов...</div>
            <form id="adasTest" style="display: none;">
                <div id="questionsContainer"></div>
                
                <button type="button" class="calculate-btn" onclick="calculateResults()">
                    Рассчитать результаты
                </button>
            </form>

            <div class="results" id="results">
                <h2>Результаты теста</h2>
                <div id="sectionResults"></div>
                <div class="total-result">
                    <div class="total-score" id="totalScore">0</div>
                    <div class="interpretation" id="interpretation"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Отладочная переменная
        const DEBUG = false; // Измените на false для отключения отладки

        // Данные о разделах и вопросах
        const sections = [
            {
                title: "I. ДЕТСТВО/ПОДРОСТКОВЫЙ ВОЗРАСТ",
                questions: [
                    "Доставляли ли вам дискомфорт жесты привязанности (объятия, поцелуи) от родственников или друзей? 🤗",
                    "Были ли у вас ритуалы перед сном (например, размещение обуви, одежды, книг или игрушек в определенном порядке, произношение определенных фраз или молитв, или необходимость слушать одну и ту же историю)? 🌙",
                    "Были ли вы очень аккуратны с учебниками, тетрадями или игрушками и не любили, когда другие брали или даже прикасались к ним? 📖",
                    "Посвящали ли вы большую часть свободного времени одиночным занятиям (например, видеоиграм или чтению книг)? 🎮",
                    "У вас было мало друзей? 👬",
                    "Были ли вы в вечных поисках «идеального друга»? 🤔❤️",
                    "Были ли вы очень привязаны к друзьям, вплоть до чувства собственничества, стремясь чтобы они общались исключительно с вами? 💔",
                    "Были ли вы упрямым ребенком? 🤨💥",
                    "Любили ли вы коллекционировать различные предметы? 📦",
                    "Избегали ли вы игр, приемов пищи или занятий физкультурой с другими детьми? ⚽👫",
                    "Испытывали ли вы головные боли или боли в животе в социальных ситуациях или при мысли о необходимости общаться? 😖",
                    "Предпочли бы вы не ходить в школу, а учиться дома самостоятельно? 🏡📚",
                    "Были ли вы избирательны в дружбе, считая почти всех детей недостаточно умными или слишком поверхностными? 🤔",
                    "Было ли вам трудно заводить новых друзей, участвовать в групповых активностях, играть в командные игры? 👥🎮",
                    "Были ли вы очень тихими и иногда неспособными говорить вовсе? 🤐",
                    "Помните ли вы, или кто-то говорил вам, что вы обладали талантами в определенных областях (например, музыка, математика, шахматы)? 🎶🧩",
                    "Помните ли вы, или кто-то говорил вам, что вы были талантливы в чем-то, но в других областях демонстрировали плохие результаты? 📉🎯",
                    "Старались ли вы избегать публичных выступлений? 🎤❌",
                    "Издевались ли над вами одноклассники или подвергались ли вы буллингу? 😢",
                    "Дразнили ли вы кого-то или были ли вы жестоки к животным или слабым одноклассникам? 🐱",
                    "Называли ли вы родителей по именам, а не «мама» или «папа»? 👩‍🦳👨‍🦳",
                ]
            },
            {
                title: "II. ВЕРБАЛЬНАЯ КОММУНИКАЦИЯ",
                questions: [
                    "Вы склонны мало говорить и/или использовать очень короткие предложения? 🗣❓",
                    "Говорите ли вы слишком тихо, слишком громко, странно или монотонно? 🔊",
                    "Случалось ли, что вы говорили то, что думаете, а потом понимали, что обидели кого-то? 💭💔",
                    "Указывали ли вам на то, что вы делаете неуместные высказывания или ведете себя необычно? 🗣😳",
                    "Часто ли вы не понимаете шутки? 🤷",
                    "Замечали ли вы или вам указывали, что другие не считают ваши шутки смешными? 🤭",
                    "Склонны ли вы повторять шутки, даже если они никого не смешат? 😂❌",
                    "Склонны ли вы воспринимать все буквально? 🤨",
                    "Трудно ли вам сразу уловить общий смысл выражений (например, «подкаблучник», «лицо кирпичом»)? 🧠💭",
                    "Кажется ли вам смешным или бессмысленным выражение «поставь себя на мое место» (особенно, если оно от противоположного пола)? 🤔❤️",
                    "Трудно ли вам завершать разговор, если он уже начат? ❓🗣",
                    "Процитируете ли вы фразы, услышанные в фильмах или прочитанные в книгах? 🎥📚",
                    "Испытываете ли вы сложности с тем, чтобы вовремя вставить слово в разговор? ⏱🗣",
                    "Считаете ли вы публичные выступления особенно стрессовыми? 🎤😰",
                    "Абсолютно ли вы избегаете публичных выступлений? 🏃🎤",
                    "Случается ли, что вы перебиваете разговор неожиданно? 💬✋",
                    "Разговариваете ли вы сами с собой, задавая вопросы и отвечая на них? 🗣💬",
                    "Вы предпочитаете общаться через электронную почту или сообщения, а не по телефону или лично? 📧📱",
                ]
            },
            {
                title: "III. НЕВЕРБАЛЬНАЯ КОММУНИКАЦИЯ",
                questions: [
                    "Вы чувствуете себя некомфортно, если кто-то пристально на вас смотрит? 👀",
                    "Вам трудно смотреть людям прямо в глаза или вы не знаете, куда смотреть, когда с кем-то разговариваете? 👁",
                    "Бывали ли случаи, когда вы проявляли высокомерие, чтобы скрыть свою неуверенность? 😤",
                    "Вам когда-либо снилось, что вы нагие? 🛏",
                    "Вас считают очень обидчивым человеком? 😠",
                    "Вы из тех людей, которые не беспокоятся о сохранении дружеских или романтических отношений? 💔",
                    "Вы склонны сутулиться и наклонять голову? 🧑‍🦯",
                    "Вы сожалеете о том, что не умеете элегантно танцевать и чувствовать себя при этом непринужденно? 💃",
                    "Вы хорошо пародируете знакомых или знаменитостей? 🎭",
                    "Вы когда-либо играли какую-либо роль, чтобы чувствовать себя увереннее при взаимодействии с другими людьми? 🎭",
                    "Приходилось ли вам использовать алкоголь, успокоительные средства или наркотики, чтобы пережить разочарование или неудачу, либо чтобы подготовиться к важному событию? 🍸",
                    "Случалось ли вам вспыхивать от ярости без видимой причины? 😡",
                    "Вам комфортнее находиться без людей вокруг на работе или в частной обстановке? 🏡",
                    "Вы когда-либо думали, что одни ситуации могут повлиять на другие, даже если они совсем не связаны (например: «Если я сначала поставлю левую ногу, выходя из кровати, день будет удачным»)? 🧠✨",
                    "Вы завидуете успешным людям, лидерам или тем, кого обычно одобряют другие? 😞",
                    "Вы часто придумываете оправдания или даже говорите неправду в незначительных ситуациях? 🤥",
                    "Вы когда-либо выдумывали ситуацию или историю, чтобы выставить себя в лучшем свете? 💭",
                    "Вам сложно выполнять даже простые действия, если кто-то наблюдает за вами (например, разговаривать по телефону, есть или писать)? 😳",
                    "Когда вам нужно что-то сделать на публике (например, выступить), вам необходимо быть абсолютно идеально подготовленным? 🎤",
                    "На работе вы часто говорите, что заняты, даже если вам нечем заняться? 👨‍💻",
                    "Вы испытываете дискомфорт от объятий, поцелуев или держания за руку человека, который вам нравится? ❤️",
                    "Вам нравится быть дома голым или посещать нудистские пляжи/кемпинги? 🏖",
                    "Вы избегаете романтических отношений из-за страха быть отвергнутым? 💔",
                    "Вам легче вступить в сексуальные отношения, чем начать эмоционально интимные отношения с партнером? 💋",
                    "Вы часто фантазируете или когда-либо участвовали в нетрадиционных или запрещенных сексуальных отношениях? 🌙",
                    "Вы предпочитаете никому не доверять свои самые сокровенные мысли? 🤐",
                    "Вы проводите много времени за видеоиграми или в интернете, до такой степени, что забываете выполнять рутинные задачи? 🎮",
                    "Вам нравится ролевые игры настолько, что вы идентифицируете себя с вашим персонажем до такой степени, что начинаете жить второй жизнью? 🧙",
                ]
            },
            {
                title: "IV. ЭМПАТИЯ",
                questions: [
                    "Вы когда-либо чувствовали себя более привязанным к своему питомцу, чем к другим людям? 🐶",
                    "Вы когда-либо чувствовали себя гораздо более привязанным к какому-либо предмету, чем к другим людям? 📱",
                    "Вы когда-либо участвовали в невозможных романтических отношениях или были с людьми, которые уже были в отношениях, или с теми, кто значительно моложе/старше вас? 💘",
                    "Вам когда-либо говорили, что вы сдержанный, холодный или слишком отстранённый по отношению к другим? ❄",
                    "Вам сложно отождествлять себя с кем-то другим?",
                    "Вам сложно понимать намерения или мысли человека перед вами?",
                    "Вам сложно отождествлять себя с героями книги или фильма и чувствовать то, что они чувствуют?",
                    "Вам сложно понимать намерения персонажей книги или фильма?",
                    "Вам сложно понимать, когда кто-то с вами флиртует?",
                    "Вам сложно понять, интересуется ли кто-то тем, что вы говорите, или скучает?",
                    "Вам сложно интерпретировать мимику и язык тела других людей?",
                    "Вам сложно представлять, чего другие ожидают от вас?"
                ]
            },
            {
                title: "V. НЕГИБКОСТЬ И ПРИВЕРЖЕННОСТЬ РУТИНЕ",
                questions: [
                    "Вам сложно избавиться от бесполезных вещей, таких как использованные ручки или прочитанные газеты?",
                    "Вы собираете как ценные, так и бесполезные предметы?",
                    "Вы чувствуете необходимость закончить коллекцию, как только начали её?",
                    "Есть ли предмет, с которым вы никогда не расстанетесь и который хотите всегда носить с собой?",
                    "Вы чрезмерно внимательны к эстетическим аспектам (например, подбору цветов, вкусу в одежде или оформлении интерьера)?",
                    "Вам приходилось повторять какое-либо действие (например, теребить руки, крутить предмет или локон волос) или говорить какие-то слова без видимой причины?",
                    "Вам приходилось повторять (даже мысленно) слово или фразу, которые вас особенно поразили?",
                    "Вам приходилось ходить определённым образом?",
                    "Вы когда-либо чувствовали необходимость многократно касаться предмета или части своего тела без видимой причины?",
                    "Вы склонны контролировать каждое движение своего тела?",
                    "Вам приходилось прочищать горло перед разговором или выполнять определённые движения руками перед тем, как писать или стучать в дверь?",
                    "Вам приходилось многократно убирать определённые зоны дома, игнорируя другие (например, тщательно чистить раковину, но не обращать внимания на остальную часть ванной)?",
                    "Вас раздражает использование определённых популярных слов или фраз, например: «Без проблем!», «Окей!» или «Ну, надо же!»?",
                    "Есть ли гласные, согласные или определённые числа, которые вам особенно не нравятся?",
                    "У вас есть привычка придумывать слова или каламбуры?",
                    "Когда вы рассказываете шутку, вы меняете голос и акцент в зависимости от персонажа?",
                    "Когда вы находитесь в состоянии стресса, помогают ли вам успокоиться совершение круговых движений или раскачивания на стуле?",
                    "Вам нужно тщательно обдумать что-либо, прежде чем принять решение?",
                    "На работе вы предпочитаете следовать строгим процедурам или шаблонам?",
                    "Вы упрямы и всегда поступаете по-своему?",
                    "Вы всегда носите одежду одного типа?",
                    "Вы редко меняете свои цели, даже если это было бы целесообразно?",
                    "Вы составляете список дел на каждый день?",
                    "Вы записываете списки принципов, которым хотите следовать, или моделей поведения, которых хотите придерживаться?",
                    "Вас расстраивают неожиданные события (например, приглашения в последний момент)?",
                    "Вы неохотно меняете свои ежедневные привычки?",
                    "У вас есть чёткие сексуальные ритуалы (например, только в определённые дни недели, в определённых местах или в определённое время)?",
                    "Вам сложно изменить своё мнение о чём-либо, даже если есть доказательства обратного?",
                    "У вас часто возникают трудности с изменением способов реагирования и/или методов работы, даже если существует более эффективный подход?",
                    "Вам сложно адаптироваться к разным характерам людей?",
                    "Вам сложно понимать нюансы, и вы склонны мыслить категорично: «чёрное или белое», «всё или ничего», «хорошо или плохо»?",
                    "Вам трудно одалживать или брать взаймы одежду, книги, пластинки или другие личные вещи?",
                    "Вы чувствуете потребность навязывать свои привычки и способы выполнения дел своим друзьям и членам семьи (например, свои представления о чистоте или свои рутины)?",
                    "Вы один из тех людей, кто не готов идти на компромисс в вопросах морали?",
                    "Вы строго соблюдаете правила этикета?",
                    "Вас особенно очаровывают военные парады или униформа?",
                    "Вы относитесь к тем людям, которым нужно, чтобы всё в доме или на работе всегда находилось на своих местах?",
                    "Вы когда-либо проявляли агрессию, потому что другие люди пытались помешать вам выполнять ваши ритуалы или не позволяли поступать по-вашему?",
                    "Если вы замечаете что-то неправильное, даже если это вас напрямую не касается, вы чувствуете необходимость вмешаться (например, написать в газету или на Facebook)?",
                    "Вы склонны раздражаться, если теряете вещи, которые вам дороги?",
                    "Вам когда-либо говорили, что вы ведёте себя слишком формально и слишком строго следуете правилам?",
                    "Вы когда-либо думали, что для хороших отношений между людьми должен существовать точный набор правил, которые нужно соблюдать?",
                    "Вам сложно менять своё мнение?"
                ]
            },
            {
                title: "VI. ОГРАНИЧЕННЫЕ ИНТЕРЕСЫ И РУМИНАЦИИ",
                questions: [
                    "Вы особенно восхищаетесь одной или несколькими знаменитыми личностями (собираете постеры, гаджеты, фотографии и интервью)?",
                    "Вам нравится говорить только с людьми, которые разделяют ваши специфические интересы?",
                    "Вы особенно хорошо замечаете детали (например, части объектов, частей тела и т.д.)?",
                    "Вам нравится думать и говорить только о немногих вещах, которые вас интересуют?",
                    "Вы стараетесь избегать социальных мероприятий (например, ужинов, вечеринок, свадеб и т.д.), потому что считаете их пустой тратой времени и чувствуете себя неуютно среди людей, говорящих о тривиальных вещах?",
                    "У вас бывает так, что мысль или тема фиксируется в вашем сознании до такой степени, что вы не можете перестать говорить об этом, даже если другие явно не заинтересованы?",
                    "Вам редко интересны или привлекательны темы, которые предпочитает большинство других людей?",
                    "У вас создается впечатление, что ваши мысли хранятся в памяти так, будто они индексированы в архиве?",
                    "Бывает ли так, что вы настолько увлечены чем-то, что полностью теряете ощущение всего остального?",
                    "Вы очарованы числами (например, датами, номерными знаками машин, расписаниями общественного транспорта и т.д.)?",
                    "Вам нравится собирать систематическую информацию о чём-то (например, типы машин, самолётов, поездов, растений или животных)?",
                    "У вас часто возникают очень сильные увлечения, и вас глубоко беспокоит, если вы не можете заниматься ими?",
                    "Вы всегда стараетесь упорядочивать свои рассуждения или наблюдения?",
                    "Вас когда-либо описывали или вы сами считали себя человеком, неспособного быть кратким, поскольку вы склонны тратить время на детали?",
                    "Вы часто опаздываете на встречи, потому что теряете ощущение времени?",
                    "Вы склонны зацикливаться на одних и тех же вопросах или мыслях?",
                    "Ваши мысли часто занимают всё ваше внимание, не оставляя возможности заниматься чем-то другим?",
                    "Вы часто продолжаете обдумывать что-то, даже если проблема не имеет решения?",
                    "Вам часто трудно заснуть, потому что вы не можете перестать думать?",
                    "Вы настаиваете на определённом способе выполнения задач, тратите на них больше времени, чем обычно, и всё равно не бываете довольны результатом?",
                    "Вы часто находите утешение в фантазиях или мечтах?"
                ]
            },
            {
                title: "VII. ГИПО- И ГИПЕРРЕАКЦИИ НА СЕНСОРНЫЕ СТИМУЛЫ",
                questions: [
                    "Вы когда-либо воспринимали гудение или низкие шумы как усиленные или даже невыносимые?",
                    "Вы когда-либо видели неясные и угрожающие образы в тенях?",
                    "Вы слышали, как голоса других людей становились внезапно странными и пугающими?",
                    "Находясь в сознании, вы когда-либо чувствовали странные, необъяснимые ощущения на коже или в теле (например, ощущение прикосновения, влажности или прохождения электрического тока)?",
                    "Находясь в сознании, вы когда-либо воспринимали звуки, запахи или вкусы, которых никто другой не ощущал?",
                    "Вы избегаете проходить или находиться в шумных местах?",
                    "Вы считаете, что у вас низкий болевой порог, например, когда вы получаете травму или порез?",
                    "Вы считаете, что у вас высокий болевой порог, например, когда вы получаете травму или порез?",
                    "Вы когда-либо страдали от болей, по поводу которых обращались к врачам, но никто не мог найти причину?",
                    "Вы иногда запираетесь в полной темноте, потому что даже свет, едва пробивающийся через закрытые ставни, нарушает ваше настроение и/или концентрацию?",
                    "Вы когда-либо были уверены, что обладаете необычными способностями или переживали особенно необычные ощущения?",
                    "Для вас физическое ощущение пищи во рту важнее, чем её реальный вкус?",
                    "Некоторые обычные ткани кажутся вам неприятными или раздражающими кожу?",
                    "Если вы оказываетесь в окружении шума, запахов и яркого света, чувствуете ли вы себя неуютно, тревожно или испуганно?",
                    "Случалось ли вам чувствовать себя неподвижным, словно блок льда, не имея возможности откликнуться на зов часами или днями?",
                    "Вы иногда слышите низкие шумы, которые не слышат другие люди?",
                    "Вы иногда испытываете трудности с мытьём и нуждаетесь в напоминаниях об этом?"
                ]
            }
        ];

        // Отладочные функции
        function setAllAnswers(value) {
            const totalQuestions = sections.reduce((sum, section) => sum + section.questions.length, 0);
            
            for (let i = 1; i <= totalQuestions; i++) {
                const radios = document.getElementsByName(`q${i}`);
                for (let radio of radios) {
                    if (radio.value === value.toString()) {
                        radio.checked = true;
                        break;
                    }
                }
            }
            console.log(`Все ответы установлены в ${value === 1 ? 'ДА' : 'НЕТ'}`);
        }

        function setRandomAnswersInRange(minScore, maxScore) {
            const totalQuestions = sections.reduce((sum, section) => sum + section.questions.length, 0);
            
            // Выбираем случайный целевой счет в нужном диапазоне
            const targetScore = Math.floor(Math.random() * (maxScore - minScore + 1)) + minScore;
            
            // Сначала все ответы устанавливаем в "нет"
            for (let i = 1; i <= totalQuestions; i++) {
                const radios = document.getElementsByName(`q${i}`);
                for (let radio of radios) {
                    if (radio.value === '0') {
                        radio.checked = true;
                        break;
                    }
                }
            }

            // Случайно выбираем вопросы для установки "да"
            const questionsToSetYes = [];
            while (questionsToSetYes.length < targetScore) {
                const randomQ = Math.floor(Math.random() * totalQuestions) + 1;
                if (!questionsToSetYes.includes(randomQ)) {
                    questionsToSetYes.push(randomQ);
                }
            }

            // Устанавливаем "да" для выбранных вопросов
            questionsToSetYes.forEach(qNum => {
                const radios = document.getElementsByName(`q${qNum}`);
                for (let radio of radios) {
                    if (radio.value === '1') {
                        radio.checked = true;
                        break;
                    }
                }
            });

            console.log(`Сгенерирован результат: ${targetScore} (диапазон: ${minScore}-${maxScore})`);
        }

        // Генерация HTML для всех вопросов
        function generateQuestions() {
            const container = document.getElementById('questionsContainer');
            let questionNumber = 1;

            // Добавляем отладочную панель если DEBUG = true
            if (DEBUG) {
                const debugPanel = document.createElement('div');
                debugPanel.className = 'debug-panel';
                debugPanel.innerHTML = `
                    <h3 style="color: #ff4444; margin-bottom: 15px;">🔧 ОТЛАДОЧНАЯ ПАНЕЛЬ</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <button type="button" onclick="setAllAnswers(1)" style="background: #4caf50; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Все ДА</button>
                        <button type="button" onclick="setAllAnswers(0)" style="background: #f44336; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Все НЕТ</button>
                        <button type="button" onclick="setRandomAnswersInRange(0, 42)" style="background: #2196f3; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Случайно < 43</button>
                        <button type="button" onclick="setRandomAnswersInRange(43, 69)" style="background: #ff9800; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Случайно 43-69</button>
                        <button type="button" onclick="setRandomAnswersInRange(70, 150)" style="background: #9c27b0; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer;">Случайно >= 70</button>
                    </div>
                `;
                container.appendChild(debugPanel);
            }

            sections.forEach((section, sectionIndex) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                sectionDiv.innerHTML = `<h2 class="section-title">${section.title}</h2>`;

                // Добавляем пояснительный текст для определенных разделов
                if (sectionIndex === 0) {
                    const explanationDiv = document.createElement('div');
                    explanationDiv.style.cssText = 'font-style: italic; margin-bottom: 20px; color: #666; font-size: 1.1em;';
                    explanationDiv.textContent = 'Когда вы были ребенком:';
                    sectionDiv.appendChild(explanationDiv);
                }

                section.questions.forEach((questionText, questionIndex) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.innerHTML = `
                        <div class="question-text">
                            <span class="question-number">${questionNumber}.</span>
                            ${questionText}
                        </div>
                        <div class="options">
                            <label class="option yes">
                                <input type="radio" name="q${questionNumber}" value="1" required>
                                <span class="option-label">😊 ДА</span>
                            </label>
                            <label class="option no">
                                <input type="radio" name="q${questionNumber}" value="0" required>
                                <span class="option-label">💔 НЕТ</span>
                            </label>
                        </div>
                    `;
                    sectionDiv.appendChild(questionDiv);
                    questionNumber++;
                });

                container.appendChild(sectionDiv);
            });

            // Скрыть загрузку и показать тест
            document.getElementById('loading').style.display = 'none';
            document.getElementById('adasTest').style.display = 'block';
        }

        // Поиск первого неотвеченного вопроса
        function findFirstUnansweredQuestion(totalQuestions) {
            for (let i = 1; i <= totalQuestions; i++) {
                const radios = document.getElementsByName(`q${i}`);
                let isAnswered = false;
                
                for (let radio of radios) {
                    if (radio.checked) {
                        isAnswered = true;
                        break;
                    }
                }
                
                if (!isAnswered) {
                    // Находим родительский элемент вопроса
                    return radios[0].closest('.question');
                }
            }
            return null;
        }

        // Подсчет результатов
        function calculateResults() {
            const form = document.getElementById('adasTest');
            const formData = new FormData(form);
            
            // Проверяем, что все вопросы отвечены
            const totalQuestions = sections.reduce((sum, section) => sum + section.questions.length, 0);
            const answeredQuestions = Array.from(formData.keys()).length;
            
            if (answeredQuestions < totalQuestions) {
                // Находим первый неотвеченный вопрос
                const firstUnansweredQuestion = findFirstUnansweredQuestion(totalQuestions);
                if (firstUnansweredQuestion) {
                    // Прокручиваем к неотвеченному вопросу
                    firstUnansweredQuestion.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                    
                    // Выделяем вопрос визуально
                    firstUnansweredQuestion.style.border = '3px solid #ff4444';
                    firstUnansweredQuestion.style.boxShadow = '0 0 15px rgba(255, 68, 68, 0.3)';
                    
                    // Убираем выделение через 3 секунды
                    setTimeout(() => {
                        firstUnansweredQuestion.style.border = '';
                        firstUnansweredQuestion.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.05)';
                    }, 3000);
                }
                
                alert(`Пожалуйста, ответьте на все вопросы. Отвечено: ${answeredQuestions} из ${totalQuestions}`);
                return;
            }

            let totalScore = 0;
            let sectionScores = [];
            let questionNumber = 1;

            // Подсчет баллов по разделам
            sections.forEach((section, sectionIndex) => {
                let sectionScore = 0;
                
                for (let i = 0; i < section.questions.length; i++) {
                    const answer = formData.get(`q${questionNumber}`);
                    if (answer === '1') {
                        sectionScore++;
                        totalScore++;
                    }
                    questionNumber++;
                }

                const percentage = Math.round((sectionScore / section.questions.length) * 100);
                sectionScores.push({
                    name: section.title,
                    score: sectionScore,
                    total: section.questions.length,
                    percentage: percentage
                });
            });

            // Отображение результатов
            displayResults(sectionScores, totalScore, totalQuestions);
        }

        function displayResults(sectionScores, totalScore, totalQuestions) {
            const resultsDiv = document.getElementById('results');
            const sectionResultsDiv = document.getElementById('sectionResults');
            const totalScoreDiv = document.getElementById('totalScore');
            const interpretationDiv = document.getElementById('interpretation');

            // Очистка предыдущих результатов
            sectionResultsDiv.innerHTML = '';

            // Результаты по разделам
            sectionScores.forEach(data => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section-result';
                sectionDiv.innerHTML = `
                    <div>
                        <strong>${data.name}</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${data.percentage}%"></div>
                        </div>
                    </div>
                    <div>
                        <strong>${data.score}/${data.total} (${data.percentage}%)</strong>
                    </div>
                `;
                sectionResultsDiv.appendChild(sectionDiv);
            });

            // Общий результат
            totalScoreDiv.textContent = `${totalScore}/${totalQuestions}`;
            
            // Интерпретация
            let interpretation;
            if (totalScore < 43) {
                interpretation = "Низкие аутичные черты";
            } else if (totalScore >= 43 && totalScore < 70) {
                interpretation = "Наличие ярких аутичных черт";
            } else {
                interpretation = "Наличие расстройства аутистического спектра";
            }
            
            interpretationDiv.textContent = interpretation;
            
            // Показать результаты
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
        });
    </script>
</body>
</html>
